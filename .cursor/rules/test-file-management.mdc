---
alwaysApply: true
description: 测试文件管理规则 - 在功能开发和测试完成后删除测试文件
---

# 测试文件管理规则

## 核心规则

在功能开发和测试完成后，应当删除所有测试文件以保持代码库的简洁性。

## 适用范围

- 所有 `*.test.ts` 和 `*.test.tsx` 文件
- 测试设置文件（如 `setup.ts`）
- 测试目录（如 `__tests__/`）
- 测试配置文件（如 `vite.config.ts` 中的测试配置）

## 执行时机

- 功能开发完成并通过测试后
- 代码审查通过后
- 准备提交到主分支前

## 删除的文件类型

- 组件测试文件
- 工具函数测试文件
- 测试设置和配置文件
- 测试相关的依赖和配置

## 例外情况

- 核心库或框架级别的测试可以保留
- 持续集成（CI）必需的测试配置可以保留
- 团队明确要求保留的测试文件

## 执行方式

```bash
# 删除所有测试文件
find src -name "*.test.*" -delete
find src -name "__tests__" -type d -exec rm -rf {} +
find src -name "setup.ts" -delete

# 清理配置文件中的测试相关配置
# 从 vite.config.ts 中移除 test 配置
# 从 package.json 中移除测试脚本和依赖（可选）
```

## 记录要求

- 在删除测试文件后，应当记录删除的文件列表
- 记录删除的原因和时间
- 确保删除操作不会影响项目的正常运行

## 注意事项

- 保留了 `package.json` 中的测试相关脚本和依赖，以便将来需要时可以快速恢复测试环境
- 如果完全不需要测试功能，可以考虑移除 `package.json` 中的测试相关依赖
